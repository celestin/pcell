/* 	Intellectual Properties of RFVLSI LAB, NCTU, TAIWAN. 
	Intended for Internal Use Only, All Rights Reserved, 2012 
	*DO NOT DISCLOSE*
	Author : Tao-Yi Lee */
	
strLibName="RFVLSI_N65"	
strCellName="_sym_cct"

pcDefinePCell(
list(ddGetObj(strLibName),strCellName, "layout"),
(
	(OD 	"float" 120.0)	 
	(W  	"float" 2.0)	 
	(OPENING  	"float" 20.0)	 
	(OPENCT  	"float" 10.0)	 
	(LEAD  	"float" 20.0)	 
	(S  	"float" 2.0)  
	(TOP_ME "string" "9")
	(NT "int" 2)
	(L12 "string" "1n")
	(L34 "string" "1n")
	(BTM_ME "string" "9")
	(dummy "boolean" t)
	(DUMMYL "string" "RFVLSI")
	(NT_N		"boolean" nil)
)
let((P masterL i master_t),
	P=W+S	
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy5"), 0:3, sprintf(nil "%L" W), "centerCenter", "R0", "roman", 1)
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy6"), 0:5, sprintf(nil "%L" S), "centerCenter", "R0", "roman", 1)
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy7"), 0:7, sprintf(nil "%L" OD), "centerCenter", "R0", "roman", 1)
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy8"), 0:9, sprintf(nil "%L" L12), "centerCenter", "R0", "roman", 1)
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy8"), 0:11, sprintf(nil "%L" L34), "centerCenter", "R0", "roman", 1)
	dbCreateLabel(pcCellView, list(DUMMYL, "dummy9"), 0:13, sprintf(nil "%L" NT), "centerCenter", "R0", "roman", 1)
	masterL = dbOpenCellViewByType(pcCellView~>lib "xfm_lead" "layout" )
	master_t = dbOpenCellViewByType(pcCellView~>lib "sym_cct_t" "layout" )
	dbCreateLabel(pcCellView, list(DUMMYL, "drawing"), OD/2:0, "ind_sym_cct", "centerCenter", "R0", "roman", 3)

	if(!NT_N
	then
		dbCreateLabel(pcCellView, list("text", "drawing"), 0:0, "Add NT_N Manually!", "centerCenter", "R0", "roman", 3)
	)

	dbCreateParamInst(pcCellView dbOpenCellViewByType(pcCellView~>lib "_hud_cross" "layout" ) nil  0:0 "R0" 1 
	list(
                        list("OD"     "float" OD)   
                        list("W"      "float" W)     
                        list("S"      "float" S)  
                        list("OPENING" "float" OPENING)
                        list("TOP_ME" "string"    TOP_ME)  
                        list("BTM_ME" "string"    BTM_ME)  
                        list("DUMMYL" "string"  "RFVLSI")  
                        list("dummy" "boolean"   dummy)  
	))

	if(NT>2
	then
	/* Inner L W */
	for(i 1 NT-2
		if(evenp(i)
		then
			dbCreateParamInst(pcCellView master_t nil  0:0 "R0" 1 
				list(
            	list("OD"     "float" OD-2*i*P)   
                list("W"      "float" W)     
                list("S"      "float" S)  
                list("OPENING" "float" 2*W)
                list("TOP_ME" "string"    TOP_ME)  
                list("BTM_ME" "string"    BTM_ME)  
                list("DUMMYL" "string"  "RFVLSI")  
                list("dummy" "boolean"   dummy)  
			))
		else
			dbCreateParamInst(pcCellView master_t nil  0:0 "MY" 1 
				list(
				list("OD"     "float" OD-2*i*P)   
                list("W"      "float" W)     
                list("S"      "float" S)  
                list("OPENING" "float" 2*W)
                list("TOP_ME" "string"    TOP_ME)  
                list("BTM_ME" "string"    BTM_ME)  
                list("DUMMYL" "string"  "RFVLSI")  
                list("dummy" "boolean"   dummy)  
    		))
		)
	)
	)
	if(evenp(NT)
        then
		dbCreateParamInst(pcCellView master_t nil  0:0 "R0" 1 
			list(
                        list("OD"     "float" OD-2*(NT-1)*P)
                        list("W"      "float" W)     
                        list("S"      "float" S)  
                        list("OPENING" "float" OPENCT-W/2)
                        list("TOP_ME" "string"    TOP_ME)  
                        list("BTM_ME" "string"    BTM_ME)  
                        list("DUMMYL" "string"  "RFVLSI")  
                        list("dummy" "boolean"   dummy)  
                        list("under" "boolean"  nil)  
	        ))
        else
		dbCreateParamInst(pcCellView master_t nil  0:0 "MY" 1 
				list(
            	list("OD"     "float" OD-2*(NT-1)*P)   
                list("W"      "float" W)     
                list("S"      "float" S)  
                list("OPENING" "float" 0)
                list("TOP_ME" "string"    TOP_ME)  
                list("BTM_ME" "string"    BTM_ME)  
                list("DUMMYL" "string"  "RFVLSI")  
                list("dummy" "boolean"   dummy)  
                list("under" "boolean"  nil)  
		))
	)
	 /**** LEAD UNDER PASS ****/    
	dbCreateParamInst(pcCellView masterL nil OD/2:OPENING "R0" 1
                list(
                list("L"      "float" LEAD)    
                list("W"      "float" W)     
                list("WD"     "float" 1.0)     
                list("PINTXT" "string" "P1") 
                list("PINP" "string"   "dummy1")
                list("TOP_ME" "string" TOP_ME)
                list("BTM_ME" "string" BTM_ME)
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
	))
	dbCreateParamInst(pcCellView masterL nil OD/2:-OPENING-W "R0" 1
                list(
                list("L"      "float" LEAD)    
                list("W"      "float" W)     
                list("WD"     "float" 1.0)     
                list("PINTXT" "string" "N1")
                list("PINP" "string"   "dummy1")       
                list("TOP_ME" "string" TOP_ME)
                list("BTM_ME" "string" BTM_ME)
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
	))
	if(evenp(NT)
	then

		if(NT == 2
		then
		dbCreateParamInst(pcCellView masterL nil OD/2-(NT-1)*P:-OPENCT-W/2 "R0" 1
    	    list(
                list("L"      "float" LEAD+(NT-1)*P)    
                list("W"      "float" W)     
                list("WD"     "float" 1.0)     
                list("PINTXT" "string" "CTp")
                list("PINP" "string"   "dummy1")       
                list("TOP_ME" "string" "9")
                list("BTM_ME" "string" "9")
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
	    ))
		dbCreateParamInst(pcCellView masterL nil OD/2-(NT-1)*P:OPENCT-W/2 "R0" 1
            list(
                list("L"      "float" LEAD+(NT-1)*P)
                list("W"      "float" W)
                list("WD"     "float" 1.0)
                list("PINTXT" "string" "CTn")
                list("PINP" "string"   "dummy1")
                list("TOP_ME" "string" "9")
                list("BTM_ME" "string" "9")
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
        ))


		else
		/* center tap via*/
		dbCreateParamInst(pcCellView dbOpenCellViewByType(pcCellView~>lib "vias" "layout" ) 
			nil  OD/2-NT*P+S:OPENCT-W/2 "R0" 1 
			list(
            	list("Width"      "float" W)     
                list("Length"      "float" W)  
                list("TOP_ME" "int"    9)  
                list("BTM_ME" "int"    7)
			))
		dbCreateParamInst(pcCellView masterL nil OD/2-(NT-1)*P:OPENCT-W/2 "R0" 1
            list(
                list("L"      "float" LEAD+(NT-1)*P)    
                list("W"      "float" W)     
                list("WD"     "float" 1.0)     
                list("PINTXT" "string" "CTp")
                list("PINP" "string"   "dummy1")       
                list("TOP_ME" "string" "7")
                list("BTM_ME" "string" "7")
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
        ))
		dbCreateParamInst(pcCellView dbOpenCellViewByType(pcCellView~>lib "vias" "layout" )
            nil  OD/2-NT*P+S:-OPENCT-W/2 "R0" 1
            list(
                list("Width"      "float" W)
                list("Length"      "float" W)
                list("TOP_ME" "int"    9)
                list("BTM_ME" "int"    7)
            ))

		dbCreateParamInst(pcCellView masterL nil OD/2-(NT-1)*P:-OPENCT-W/2 "R0" 1
            list(
                list("L"      "float" LEAD+(NT-1)*P)
                list("W"      "float" W)
                list("WD"     "float" 1.0)
                list("PINTXT" "string" "CTn")
                list("PINP" "string"   "dummy1")
                list("TOP_ME" "string" "7")
                list("BTM_ME" "string" "7")
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
        ))
		)
	else
		/* for odd turns, center taps are also on the right */
		/* center tap via*/
		dbCreateParamInst(pcCellView dbOpenCellViewByType(pcCellView~>lib "vias" "layout" ) 
			nil  -OD/2+(NT-1)*P:-W/2 "R0" 1 
			list(
            	list("Width"      "float" W)     
                list("Length"      "float" W)  
                list("TOP_ME" "int"    9)  
                list("BTM_ME" "int"    7)
		))
		dbCreateParamInst(pcCellView masterL nil -OD/2+(NT-1)*P+W:-W/2 "R0" 1
                list(
                list("L"      "float" LEAD+OD-NT*P+S)    
                list("W"      "float" W)     
                list("WD"     "float" 1.0)     
                list("PINTXT" "string" "CT")
                list("PINP" "string"   "dummy1")       
                list("TOP_ME" "string" "7")
                list("BTM_ME" "string" "7")
                list("DUMMYL" "string" DUMMYL)
                list("dummy" "boolean" dummy)
    	))
	)
)/*end of let*/
)/*end of pcDefinePCell*/
